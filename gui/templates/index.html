<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corn Leaf Disease Recognition System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7f0;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path fill="%23e8edd1" fill-opacity="0.4" d="M31,27 C25,35 25,45 31,53 C37,61 49,61 55,53 C61,45 61,35 55,27 C49,19 37,19 31,27 Z"/></svg>');
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #3a4a3a;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(58, 74, 58, 0.15);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            min-height: 550px;
            border: 1px solid #e0e6d1;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            background: #e8f4e8;
            border-radius: 0 0 0 100%;
            z-index: -1;
        }

        .title {
            text-align: center;
            color: #3a6a3a;
            font-size: 2.2em;
            font-weight: 600;
            margin-bottom: 30px;
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .title::after {
            content: "";
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #8bc34a, #4caf50);
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .upload-section {
            text-align: center;
            position: relative;
        }

        .image-preview {
            width: 320px;
            height: 320px;
            border: 2px dashed #c8d7c8;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            transition: all 0.3s ease;
            background: #f9fbf4;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        .image-preview:hover {
            border-color: #8bc34a;
            background: #f1f7e8;
        }

        .image-preview.has-image {
            border: none;
            padding: 0;
        }

        .preview-image {
            max-width: 100%;
            max-height: 100%;
            border-radius: 12px;
            object-fit: cover;
        }

        .upload-icon {
            font-size: 3.5em;
            color: #a5c9a5;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .image-preview:hover .upload-icon {
            color: #8bc34a;
            transform: scale(1.1);
        }

        .upload-text {
            color: #5a6a5a;
            font-size: 1.1em;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .upload-hint {
            color: #7a8a7a;
            font-size: 0.85em;
            font-weight: 400;
        }

        .upload-btn {
            background: linear-gradient(135deg, #8bc34a, #4caf50);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(139, 195, 74, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 195, 74, 0.4);
            background: linear-gradient(135deg, #7cb342, #43a047);
        }

        .upload-btn:active {
            transform: translateY(0);
        }

        .results-section {
            background: #f9fbf4;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #e0e6d1;
            height: 100%;
        }

        .results-title {
            color: #3a6a3a;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .results-title svg {
            fill: #8bc34a;
            width: 24px;
            height: 24px;
        }

        .results-content {
            min-height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .no-results {
            color: #9aab9a;
            font-size: 1.1em;
            text-align: center;
            padding: 20px;
        }

        .result-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            animation: slideIn 0.5s ease-out;
            width: 100%;
            border-left: 4px solid #8bc34a;
        }

        .disease-name {
            font-size: 1.3em;
            font-weight: 600;
            color: #3a4a3a;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .disease-name svg {
            width: 20px;
            height: 20px;
            fill: #8bc34a;
        }

        .confidence {
            font-size: 1em;
            color: #5a6a5a;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .confidence-value {
            font-weight: 600;
            color: #4caf50;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e0e6d1;
            border-radius: 4px;
            margin-top: 12px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #8bc34a, #4caf50);
            border-radius: 4px;
            transition: width 0.8s ease-out;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8bc34a, #4caf50);
            color: white;
            box-shadow: 0 5px 15px rgba(139, 195, 74, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #7cb342, #43a047);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 195, 74, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #5a6a5a;
            border: 2px solid #e0e6d1;
        }

        .btn-secondary:hover {
            border-color: #c8d7c8;
            color: #3a4a3a;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #8bc34a;
            font-weight: 600;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #8bc34a;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .error {
            color: #d32f2f;
            background: #fde8e8;
            border: 1px solid #f5c6cb;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-weight: 500;
        }

        .leaf-decoration {
            position: absolute;
            opacity: 0.1;
            z-index: -1;
        }

        .leaf-1 {
            top: 20px;
            left: 20px;
            width: 100px;
            transform: rotate(-15deg);
        }

        .leaf-2 {
            bottom: 30px;
            right: 40px;
            width: 120px;
            transform: rotate(25deg);
        }

        .disease-info {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #e0e6d1;
            font-size: 0.9em;
            color: #5a6a5a;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .image-preview {
                width: 280px;
                height: 280px;
            }
            
            .container {
                padding: 30px 20px;
            }
            
            .title {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Leaf decorations -->
        <svg class="leaf-decoration leaf-1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
            <path fill="#8bc34a" d="M413.97,74.05c-58.17-69.25-168.17-28.82-217.38,48.06C147.38,198.38,145.1,324.6,211,389.56c65.89,64.96,192.11,67.25,267.45,12.5C553.82,347.31,513.39,237.31,413.97,74.05Z"/>
        </svg>
        <svg class="leaf-decoration leaf-2" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
            <path fill="#8bc34a" d="M413.97,74.05c-58.17-69.25-168.17-28.82-217.38,48.06C147.38,198.38,145.1,324.6,211,389.56c65.89,64.96,192.11,67.25,267.45,12.5C553.82,347.31,513.39,237.31,413.97,74.05Z"/>
        </svg>
        
        <h1 class="title">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle; margin-right: 10px;">
                <path d="M18 8C18 4.69 15.31 2 12 2C8.69 2 6 4.69 6 8C6 12.5 12 19 12 19C12 19 18 12.5 18 8Z" fill="#8bc34a"/>
                <path d="M12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7C10.8954 7 10 7.89543 10 9C10 10.1046 10.8954 11 12 11Z" fill="white"/>
            </svg>
            Corn Leaf Disease Recognition
        </h1>
        
        <div class="main-content">
            <div class="upload-section">
                <div class="image-preview" id="imagePreview">
                    <div class="upload-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 16L8.586 11.414C8.961 11.039 9.47 10.828 10 10.828C10.53 10.828 11.039 11.039 11.414 11.414L16 16M14 14L15.586 12.414C15.961 12.039 16.47 11.828 17 11.828C17.53 11.828 18.039 12.039 18.414 12.414L20 14M14 8H14.01M6 20H18C19.105 20 20 19.105 20 18V6C20 4.895 19.105 4 18 4H6C4.895 4 4 4.895 4 6V18C4 19.105 4.895 20 6 20Z" stroke="#a5c9a5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="upload-text">Upload corn leaf image</div>
                    <div class="upload-hint">Supports JPG, PNG (max 10MB)</div>
                </div>
                <button class="upload-btn" onclick="triggerFileInput()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 16C4.791 16 3 14.209 3 12C3 9.791 4.791 8 7 8C7.933 8 8.8 8.334 9.5 8.9L12 6.5V15.5L9.5 13.1C8.8 13.666 7.933 14 7 14V16ZM17 16C14.791 16 13 14.209 13 12C13 9.791 14.791 8 17 8C17.933 8 18.8 8.334 19.5 8.9L22 6.5V15.5L19.5 13.1C18.8 13.666 17.933 14 17 14V16Z" fill="white"/>
                    </svg>
                    Choose Image
                </button>
                <input type="file" id="fileInput" accept=".jpg,.jpeg,.png" style="display: none;" onchange="handleFileSelect(event)">
            </div>
            
            <div class="results-section">
                <h2 class="results-title">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                    </svg>
                    Analysis Results
                </h2>
                <div class="results-content" id="resultsContent">
                    <div class="no-results">Upload a corn leaf image to detect diseases</div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary hidden" id="recognizeBtn" onclick="recognizeDisease()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z" fill="white"/>
                            <path d="M12 1C12.5523 1 13 1.44772 13 2V4C13 4.55228 12.5523 5 12 5C11.4477 5 11 4.55228 11 4V2C11 1.44772 11.4477 1 12 1Z" fill="white"/>
                            <path d="M12 19C12.5523 19 13 19.4477 13 20V22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22V20C11 19.4477 11.4477 19 12 19Z" fill="white"/>
                            <path d="M4.9292 4.92896C5.31972 4.53843 5.95289 4.53843 6.34341 4.92896L7.75763 6.34317C8.14815 6.7337 8.14815 7.36686 7.75763 7.75739C7.3671 8.14791 6.73394 8.14791 6.34341 7.75739L4.9292 6.34317C4.53867 5.95265 4.53867 5.31948 4.9292 4.92896Z" fill="white"/>
                            <path d="M16.2426 16.2427C16.6332 15.8522 17.2663 15.8522 17.6569 16.2427L19.0711 17.6569C19.4616 18.0475 19.4616 18.6806 19.0711 19.0712C18.6805 19.4617 18.0474 19.4617 17.6569 19.0712L16.2426 17.6569C15.8521 17.2664 15.8521 16.6333 16.2426 16.2427Z" fill="white"/>
                            <path d="M1 12C1 11.4477 1.44772 11 2 11H4C4.55228 11 5 11.4477 5 12C5 12.5523 4.55228 13 4 13H2C1.44772 13 1 12.5523 1 12Z" fill="white"/>
                            <path d="M19 12C19 11.4477 19.4477 11 20 11H22C22.5523 11 23 11.4477 23 12C23 12.5523 22.5523 13 22 13H20C19.4477 13 19 12.5523 19 12Z" fill="white"/>
                            <path d="M4.9292 19.0711C4.53867 18.6806 4.53867 18.0474 4.9292 17.6569L6.34341 16.2427C6.73394 15.8522 7.3671 15.8522 7.75763 16.2427C8.14815 16.6333 8.14815 17.2664 7.75763 17.6569L6.34341 19.0711C5.95289 19.4617 5.31972 19.4617 4.9292 19.0711Z" fill="white"/>
                            <path d="M17.6569 4.92896C18.0474 4.53843 18.6805 4.53843 19.0711 4.92896L19.0711 4.92896C19.4616 5.31948 19.4616 5.95265 19.0711 6.34317L17.6569 7.75739C17.2663 8.14791 16.6332 8.14791 16.2426 7.75739C15.8521 7.36686 15.8521 6.7337 16.2426 6.34317L17.6569 4.92896Z" fill="white"/>
                        </svg>
                        Analyze Leaf
                    </button>
                    <button class="btn btn-secondary" onclick="resetSystem()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zM6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z" fill="#5a6a5a"/>
                        </svg>
                        Reset
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedFile = null;

        function triggerFileInput() {
            document.getElementById('fileInput').click();
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                // Check file size (10MB max)
                if (file.size > 10 * 1024 * 1024) {
                    showError('File size exceeds 10MB limit');
                    return;
                }
                
                selectedFile = file;
                displayImage(file);
                document.getElementById('recognizeBtn').classList.remove('hidden');
            }
        }

        function displayImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('imagePreview');
                preview.innerHTML = `<img src="${e.target.result}" alt="Preview" class="preview-image">`;
                preview.classList.add('has-image');
            };
            reader.readAsDataURL(file);
        }

        async function recognizeDisease() {
            if (!selectedFile) {
                showError('Please select an image first');
                return;
            }

            // Show loading state
            const resultsContent = document.getElementById('resultsContent');
            resultsContent.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    Analyzing corn leaf...
                </div>
            `;

            try {
                const formData = new FormData();
                formData.append('image', selectedFile);

                const response = await fetch('/predict', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                
                if (result.success) {
                    displayResults(result);
                } else {
                    showError(result.error || 'Analysis failed. Please try again.');
                }
            } catch (error) {
                showError('Failed to connect to server. Please check your connection.');
                console.error('Error:', error);
            }
        }

        function displayResults(results) {
            const resultsContent = document.getElementById('resultsContent');
            
            // Format confidence as percentage
            const confidencePercent = results.confidence.toFixed(2);
            
            // Get disease information
            const diseaseInfo = getDiseaseInfo(results.prediction);
            
            resultsContent.innerHTML = `
                <div class="result-item">
                    <div class="disease-name">
                        ${getDiseaseIcon(results.prediction)}
                        ${results.prediction}
                    </div>
                    <div class="confidence">
                        Confidence: <span class="confidence-value">${confidencePercent}%</span>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${confidencePercent}%"></div>
                    </div>
                    ${diseaseInfo ? `
                    <div class="disease-info">
                        <strong>About:</strong> ${diseaseInfo.description}<br>
                  
                    </div>
                    ` : ''}
                </div>
            `;
        }
        
        function getDiseaseIcon(diseaseName) {
            const icons = {
                'Northen Leaf Blight': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="#ff9800"/><path d="M7 13h10v2H7z" fill="#ff9800"/></svg>',
                'Common Rust': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="#f44336"/><path d="M7 13h10v2H7z" fill="#f44336"/></svg>',
                'Gray Leaf Spot': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="#9e9e9e"/><path d="M7 13h10v2H7z" fill="#9e9e9e"/></svg>',
                'Healthy': '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="#4caf50"/><path d="M9 16.17L5.53 12.7a.996.996 0 1 1 1.41-1.41L9 13.35l7.59-7.59a.996.996 0 1 1 1.41 1.41L9 16.17z" fill="#4caf50"/></svg>'
            };
            
            return icons[diseaseName] || '';
        }
        
        function getDiseaseInfo(diseaseName) {
            const diseaseInfo = {
                'Northen Leaf Blight': {
                    description: 'Northen leaf blight is a fungal disease that causes elongated lesions on leaves.',
                    
                },
                'Common Rust': {
                    description: 'Common rust appears as small, circular to elongated pustules on leaves.',
                    
                },
                'Gray Leaf Spot': {
                    description: 'Gray leaf spot causes rectangular lesions bounded by leaf veins.',
                    
                },
                'Healthy': {
                    description: 'Your corn plant shows no signs of common diseases.',
                    
                }
            };
            
            return diseaseInfo[diseaseName];
        }

        function showError(message) {
            const resultsContent = document.getElementById('resultsContent');
            resultsContent.innerHTML = `
                <div class="error">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#d32f2f" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                    </svg>
                    ${message}
                </div>
            `;
        }

        function resetSystem() {
            selectedFile = null;
            
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = `
                <div class="upload-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 16L8.586 11.414C8.961 11.039 9.47 10.828 10 10.828C10.53 10.828 11.039 11.039 11.414 11.414L16 16M14 14L15.586 12.414C15.961 12.039 16.47 11.828 17 11.828C17.53 11.828 18.039 12.039 18.414 12.414L20 14M14 8H14.01M6 20H18C19.105 20 20 19.105 20 18V6C20 4.895 19.105 4 18 4H6C4.895 4 4 4.895 4 6V18C4 19.105 4.895 20 6 20Z" stroke="#a5c9a5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="upload-text">Upload corn leaf image</div>
                <div class="upload-hint">Supports JPG, PNG (max 10MB)</div>
            `;
            preview.classList.remove('has-image');
            
            const resultsContent = document.getElementById('resultsContent');
            resultsContent.innerHTML = '<div class="no-results">Upload a corn leaf image to detect diseases</div>';
            
            document.getElementById('recognizeBtn').classList.add('hidden');
            document.getElementById('fileInput').value = '';
        }

        // Drag and drop functionality
        const imagePreview = document.getElementById('imagePreview');
        
        imagePreview.addEventListener('dragover', (e) => {
            e.preventDefault();
            imagePreview.style.borderColor = '#8bc34a';
            imagePreview.style.background = '#f1f7e8';
        });
        
        imagePreview.addEventListener('dragleave', () => {
            imagePreview.style.borderColor = '#c8d7c8';
            imagePreview.style.background = '#f9fbf4';
        });
        
        imagePreview.addEventListener('drop', (e) => {
            e.preventDefault();
            imagePreview.style.borderColor = '#c8d7c8';
            imagePreview.style.background = '#f9fbf4';
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type.startsWith('image/')) {
                if (files[0].size > 10 * 1024 * 1024) {
                    showError('File size exceeds 10MB limit');
                    return;
                }
                
                selectedFile = files[0];
                displayImage(files[0]);
                document.getElementById('recognizeBtn').classList.remove('hidden');
            }
        });

        imagePreview.addEventListener('click', triggerFileInput);
    </script>
</body>
</html>